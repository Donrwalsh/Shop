<div class="container">
  <form
    class="needs-validation"
    novalidate
    [formGroup]="accountForm"
    (ngSubmit)="save()"
  >
    <div class="row">
      <div class="col-sm-2">
        <label for="levelInput" class="form-label">Level</label>
        <input
          class="form-control"
          id="levelInput"
          formControlName="level"
          [ngClass]="{
            'is-invalid': !accountForm.controls.level.valid,
            'is-valid': accountForm.controls.level.valid
          }"
        />
        <div class="invalid-feedback">({{ minLevel }}-{{ maxLevel }})</div>
      </div>
      <div class="col-sm-4">
        <label for="XP" class="form-label">XP</label>
        <div class="input-group">
          <input
            type="text"
            class="form-control"
            id="xp"
            formControlName="xp"
            aria-describedby="basic-addon3 basic-addon4"
            [ngClass]="{
              'is-invalid': !accountForm.controls.xp.valid,
              'is-valid': accountForm.controls.xp.valid
            }"
          />
          <span class="input-group-text" id="basic-addon3"
            >/ {{ readableXpToNextLevel() }}</span
          >
          <div class="invalid-feedback">(0-{{ readableXpToNextLevel() }})</div>
        </div>
      </div>
      <div class="col-sm-2">
        <label for="furniture" class="form-label">Furniture</label>
        <input
          class="form-control"
          id="furnitureInput"
          formControlName="furnitureSlots"
          [ngClass]="{
            'is-invalid': !accountForm.controls.furnitureSlots.valid,
            'is-valid': accountForm.controls.furnitureSlots.valid
          }"
        />
        <div class="invalid-feedback">
          ({{ minFurnitureSlots }}-{{ maxFurnitureSlots }})
        </div>
      </div>
      <div class="col-sm"></div>
    </div>
    <div>
      <ngx-datatable [rows]="rows" [columns]="columns">
        <ngx-datatable-column name="Type" [width]="200">
          <ng-template
            ngx-datatable-cell-template
            let-rowIndex="rowIndex"
            let-value="value"
            let-row="row"
          >
            <img
              src="{{
                getFurnitureImage(rows[rowIndex]?.type, rows[rowIndex]?.level)
              }}"
              style="width: 26px"
            />
            {{ rows[rowIndex].type }}
          </ng-template>
        </ngx-datatable-column>
        <ngx-datatable-column name="Level">
          <ng-template
            ngx-datatable-cell-template
            let-rowIndex="rowIndex"
            let-value="value"
            let-row="row"
          >
            <input
              *ngIf="
                ['counter', 'hoard'].includes(typeMap(rows[rowIndex].type))
              "
              class="form-control"
              id="furniture-{{ typeMap(rows[rowIndex].type) }}"
              formControlName="{{ typeMap(rows[rowIndex].type) }}"
              style="height: 28px; width: 30%"
            />
            <input
              *ngIf="
                ['trunk'].includes(typeMap(rows[rowIndex].type))
              "
              class="form-control"
              id="furniture-{{ typeMap(rows[rowIndex].type) }}"
              formControlName="{{ typeMap(rows[rowIndex].type) + rows[rowIndex].designation }}"
              style="height: 28px; width: 30%"
            />
          </ng-template>
        </ngx-datatable-column>
        <ngx-datatable-column name="Size"></ngx-datatable-column>
        <ngx-datatable-column name="Storage"></ngx-datatable-column>
        <ngx-datatable-column name="Energy">
          <ng-template
            ngx-datatable-cell-template
            let-rowIndex="rowIndex"
            let-value="value"
            let-row="row"
          >
          </ng-template>
        </ngx-datatable-column>
        <ngx-datatable-column name="Upgrade Cost"></ngx-datatable-column>
        <ngx-datatable-column name="Upgrade Time"></ngx-datatable-column>
      </ngx-datatable>
    </div>
    <div class="row mt-5">
      <button type="submit" class="btn btn-primary">Save</button>
    </div>
  </form>
  <p>{{ getInterestingFactOne() }}</p>
  <p>{{ getInterestingFactTwo() }}</p>
</div>
